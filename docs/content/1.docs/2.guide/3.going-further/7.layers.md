---
description: Nuxt provides a powerful system that allows you to extend the default files, configs, and much more.
---

# Authoring Nuxt Layers

Nuxt layers, are a powerful feature that you can use to share and reuse partial Nuxt applications within a monorepo or directly publish them via NPM or git repository. The layers structure is almost identical to a standard Nuxt application which makes them easy to author and maintain. ([Read More](/docs/getting-started/layers))

A minimal Nuxt layer directory should contain a `nuxt.config.ts` file to indicate it is a Layer.

```ts{}[base/nuxt.config.ts]
export default defineNuxtConfig({})
```

Additionally, you can create more directory structures in the layer directory. They will be auto-scanned by Nuxt and extended for the project extending this layer.

- `components/*` - Extend the default components
- `composables/*` - Extend the default composables
- `pages/*` - Extend the default pages
- `server/*` - Extend the default server endpoints & middleware
- `nuxt.config.ts` - Extend the default nuxt config
- `app.config.ts` - Extend the default app config

## Basic Example

::code-group

  ```ts{}[app/nuxt.config.ts]
  export default defineNuxtConfig({
    extends: [
      '../base'
    ]
  })
  ```

  ```vue{}[app/app.vue]
    <template>
      <BaseComponent/>
    </template>
  ```

  ```ts{}[base/nuxt.config.ts]
    export default defineNuxtConfig({
      // Extending from base nuxt.config.ts!
      app: {
        head: {
          title: 'Extending Configs is Fun!',
          meta: [
            { name: 'description', content: 'I am using the extends feature in nuxt 3!' }
          ],
        }
      }
    })
  ```

  ```vue{}[base/components/BaseComponent.vue]
    <template>
      <h1>Extending Components is Fun!</h1>
    </template>
  ```

::

## Using Starter Templates

To get started you want to init the [nuxt/starter/layer](https://github.com/nuxt/starter/tree/layer). This will create a basic structure for you to start with. Execute this command within the terminal to get started:

```bash
npx nuxi init --template layer nuxt-layer
```

Follow up on the README instructions for the next steps.

::alert
Check [nuxt-themes/starter](https://github.com/nuxt-themes/starter) for a more opinionated starter for authoring Nuxt themes. It can be initialized with:

```bash
 npx nuxi init --template gh:nuxt-themes/starter my-theme
```

::

## Publishing layers

You can publish and share layers out of the monorepo by either using a remote source or an NPM package.

### Publishing via Git Repository

You can use a Git repository to share your Nuxt layer. Some examples:

```ts{}[nuxt.config.ts]
  export default defineNuxtConfig({
    extends: [
      'github:username/repoName',        // GitHub Remote Source
      'github:username/repoName/base',   // GitHub Remote Source within /base directory
      'github:username/repoName#dev',    // GitHub Remote Source from dev branch
      'github:username/repoName#v1.0.0', // GitHub Remote Source from v1.0.0 tag
      'gitlab:username/repoName',        // GitLab Remote Source example
      'bitbucket:username/repoName',     // Bitbucket Remote Source example
    ]
  })
```

See [unjs/giget](https://github.com/unjs/giget) for more information.

::alert{type="info"}
If you want to extend a private remote source, you need to add an environment variable `GIGET_AUTH=<token>` to provide a token.
::

::alert{type="warning"}
Currently, with git remote sources, if a layer has NPM dependencies, you need to manually install it in the target project. We are working on this to auto-install layer dependencies with git sources.
::

### Publishing via NPM package

You can publish Nuxt layers as an NPM package that contains the files and dependencies you want to extend. This allows you to share your config with others, use it in multiple projects or use it privately.

To extend from an (installed) NPM package, you need to make sure that the module is published to NPM and installed in the user's project as a devDependency. Then you can use the module name to extend the current nuxt config:

```ts{}[nuxt.config.ts]
  export default defineNuxtConfig({
    extends: [
      // Node Module with scope
      '@scope/moduleName',
      // or just the module name
      'moduleName'
    ]
  })
```

To use it as a node module, you want to make sure that the `package.json` has the correct properties filled out. This will make sure that the files are included when the node module is published.

```json{}[package.json]
  {
    "name": "my-theme",
    "version": "1.0.0",
    "description": "My Theme",
    "type": "module",
    "main": "./nuxt.config.ts"
  }
```

::alert{type="info"}
Make sure any dependency required by layer logic, is in the `dependencies` but the `nuxt` dependency or anything only used for testing the layer before publishing, remains in the `devDependencies`.
::

Now you can proceed to publish the module to the NPM module either public or private.

::alert{type="warning"}
When publishing the layer as a private npm package, you need to make sure you log in, to authenticate with npm to download the node module.
::

## Tips for Authoring Layers

### Relative Paths and Aliases

When importing using aliases such as `~/` and `@/` in a layer components and composables, they are resolved relative to the user's project paths. As a workaround, you can **use relative paths** to import them.

Also when using relative paths in `nuxt.config` file of a layer, (with exception of nested `extends`) they are resolved relative to user's project instead of the layer. As a workaround, use full resolved paths in `nuxt.config`:

```js
export default defineNuxtConfig({
   css: [require.resolve('./assets/main.css')]
})
```

### Configuration Merging

When extending multiple layers, `nuxt.config` files will be merged using [unjs/defu](https://github.com/unjs/defu). User project has always most periority and then periority for merging is from top to bottom for `extends` field.

## Multi Layer Support for Nuxt Modules

You can use internal property `nuxt.options._layers` to support custom multi layer handling for your modules. See [content module source code](https://github.com/nuxt/content/blob/005741a7cee8879e27550d5ce9b5c87d6cdfa8ac/src/module.ts#L420) for a usage example.
