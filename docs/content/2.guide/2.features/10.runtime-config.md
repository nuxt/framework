# Runtime Config

Nuxt provides an API to define the runtime config within your application and API routes.

## Exposing runtime config

To expose config and environment variables to the rest of your app, you will need to define runtime configuration in your `nuxt.config` file, using the [`runtimeConfig` options](/guide/directory-structure/nuxt.config#runtimeconfig).

**Example:**

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    // The private keys which should not be exposed to the client-side
    apiSecret: '123',
    // Keys within public, will be also exposed to the client-side
    public: {
      apiBase: '/api',
    }
  },
})
```

When adding `apiBase` to the `runtimeConfig.public`, Nuxt adds it to the each page payload. This way we can universally access `apiBase` in both server and browser.

```js
const runtimeConfig = useRuntimeConfig()

console.log(runtimeConfig.apiSecret)
console.log(runtimeConfig.public.apiBase)
```

### Overriding Runtime Config with Environment Variables

The most common way to provide configuration is by using [Environment Variables](https://medium.com/chingu/an-introduction-to-environment-variables-and-how-to-use-them-f602f66d15fa).
Nuxt CLI has built-in [dotenv](https://github.com/motdotla/dotenv) support.

In addition to any process environment variables, if you have a `.env` file in your project root directory, it will be automatically loaded into `process.env` and accessible within your `nuxt.config` file and modules.

**Example:**

```sh [.env]
NUXT_API_SECRET=api_secret_token
NUXT_PUBLIC_BASE_URL=https://nuxtjs.org
```

```ts [nuxt.config.ts]
export default defineNuxtConfig({
  runtimeConfig: {
    apiSecret: '',
    public: {
      apiBase: '', // Or a default value
    }
  },
})
```

## Accessing runtime config

### Vue app

Within the Vue part of your Nuxt app, you will need to call `useRuntimeConfig()` to access the runtime config.

**Note:** Behavior is different between client side and server side:

- On client side, only keys in `public` are available and the object is both writable and reactive.
- On server side, entire runtime config is available but it is read-only to avoid context sharing.

```vue
<template>
  <div>
    <div>Runtime Config: {{ config }}</div>
  </div>
</template>

<script setup>
const config = useRuntimeConfig()
if (process.server) {
  console.log('API secret:', config.apiSecret)
}
</script>
```

**ðŸ›‘ Security note:** Be careful to not expose runtime config keys to the client-side by either rendering them or passing them to `useState`.

::alert{icon=ðŸ‘‰}
**`useRuntimeConfig` only works during `setup` or `Lifecycle Hooks`**.
::

### Plugins

If you want to use the runtime config within any (custom) plugin, you can use `useRuntimeConfig()` inside of your `defineNuxtPlugin` function.

For example:

```ts
export default defineNuxtPlugin((nuxtApp) => {
  const config = useRuntimeConfig()
  console.log('API base URL:', config.public.apiBase)
});
```

### API routes

Within the API routes, you can access runtime config by directly importing from virtual `#nitro`.

```ts
import { useRuntimeConfig } from '#nitro'

const config = useRuntimeConfig()

export default async () => {
  const result = await $fetch('https://my.api.com/test', {
    headers: {
      Authorization: `Bearer ${config.apiSecret}`
    }
  })
  return result
}
```

### Typing runtime config

Currently it is possible to manually type your runtime config.

```ts [index.d.ts]
declare module '@nuxt/schema' {
  interface RuntimeConfig {
    apiToken: string
    public: {
      testConfig: string
    }
  }
}
// It is always important to ensure you import/export something when augmenting a type
export {}
```
