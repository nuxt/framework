# API Routes

Nuxt will automatically register files in the `/server/api` directory to create API endpoints.

To handle requests, each file can export a default function or an instance of a [h3 app](https://github.com/unjs/h3#usage) to add even more functionality to an API route. These can directly return a promise, JSON data or simply use `res.end()`.

Learn more about [h3 methods](https://www.jsdocs.io/package/h3#package-index-functions).

## Route Parameter

For ease of use, routes that are dependent on a parameter can specify the parameter within brackets in the file name `/api/hello/[parameter].ts`.

```ts [/server/api/hello/[name].ts]
export default eventHandler(event => {
    return `Hello, ${event.context.params.name}!`
})
```

## Method Matching

Routes can be suffixed with `.get`, `.post`, `.put`, `.delete` to match a [supported HTTP Method](https://github.com/unjs/nitro/blob/main/src/runtime/virtual/server-handlers.d.ts#L7).

```ts [/server/api/test.post.ts]
export default eventHandler(() => 'Test post handler')
```

Given the example above, the `test` route will be declared as a `POST` route.

## Catch-all route

A catch all route can be defined by creating a file in the `api` directory with the name `[...].ts`. This route will be triggered for all requests that do not match any other route.

This is useful for special use cases as well as fallback error handling.

```ts [/server/api/[...].ts]
export default eventHandler(event => `Default page`)
```

## Examples

### Hello World

```ts [/server/api/hello.ts]
export default eventHandler(() => '<h1>Hello World</h1>')
```

### POST Request

<code-group>
<code-block label="Basic" active>

```ts [/server/api/hello.ts]
export default eventHandler(async (event) => {
    const body = await useBody(event.req); // only for POST | PUT | PATCH | DELETE requests

    return { body }
})
```

</code-block>
<code-block label="Method Matching">

```ts [/server/api/hello.post.ts]
export default defineEventHandler(() => '<h1>Hello World</h1>')
```

</code-block>
</code-group>

### Using Router 

```ts [/server/api/hello.ts]
import { createApp, createRouter } from 'h3'

const app = createApp()
const router = createRouter()

app.use(router)

router.get('/', () => 'Hello World')

export default app
```

### Using Node.js style

```ts [server/api/node.ts]
import type { IncomingMessage, ServerResponse } from 'http'

export default async (req: IncomingMessage, res: ServerResponse) => {
  res.statusCode = 200
  res.end('Works!')
}
```

### Access Request Data

```ts
export default eventHandler(async (event) => {
  const params = event.context.params;
  const body = await useBody(event.req);  // only for POST | PUT | PATCH | DELETE requests
  const cookies = useCookies(event.req);

  return { params, body, cookies };
});
```