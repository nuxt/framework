# Deployment (generic)

There are four provided generic presets for Nuxt Nitro that you can use out-of-the-box:

1. [NodeJS server](#nodejs-server)
2. [NodeJS function](#nodejs-function)
3. [Lambda function](#lambda-function)
4. [Service worker](#service-worker)

If you need to [create a custom preset](#custom-build-preset-advanced), that's possible too. ðŸš€

You may also want to check out the docs for [platform presets that are supported out-of-the-box](/build/platforms).

## NodeJS server

 - Default preset if none is specified or auto-detected
 - Loads only the chunks required to render the request for optimal cold start timing
 - Useful for debugging

### Entrypoint

With `{ preset: 'server' }` the result will be an entrypoint that launches a ready-to-run Node server.

#### Example

```bash
node .output/server
# > Load chunks/nitro/server (10.405923ms)
# > Cold Start (26.289817ms)
# Listening on http://localhost:3000

curl http://localhost:3000
```

## NodeJS function

 - Compatible with many NodeJS servers
 - Drop-in usage with express or native http server
 - Loads only the chunks required to render the request for optimal cold start timing

### Entrypoint

With `{ preset: 'node' }` the result will be an entrypoint exporting a function with the familiar `(req, res) => {}` signature used in [express](https://expressjs.com/), [h3](https://github.com/nuxt-contrib/h3), etc.

**Warning**
It is not recommended to use this preset directly, and particularly not with a 3rd-party server.

### Example

#### Express middleware

```ts
import express from 'express'
import handler from './.output/server'

const app = express()

app.use(handler)
app.listen(3000)
```

#### Node server

```ts
import { createServer } from 'http'
import handler from './.output/server'

const server = createServer(handler)
server.listen(8080)
```


## Lambda function

 - Compatible with common lambda formats (AWS, Netlify and others)

### Entrypoint

With `{ preset: 'lambda' }` the result will be an entrypoint that exports a handler function that responds to an event and returns a response. This preset is compatible with [AWS Lambda](https://docs.aws.amazon.com/lex/latest/dg/lambda-input-response-format.html) and [Netlify Functions](https://docs.netlify.com/functions/build-with-javascript).

It can be used programmatically or as part of a deploy.

```ts
import { handler } from './.output/server'

// Use programmatically
const { statusCode, headers, body } = handler({ path: '/' })
```

## Service worker

 - Can be used for edge rendering
 - No dependency on NodeJS
 - No NodeJS environment and features

**Warning**
Deployment as service worker has some limitations since SSR code is not running in NodeJS environment but pure JavaScript.

### Entrypoint

The worker preset produces a service worker that can provide full HTML rendering within a worker context (for example [Cloudflare Workers](/deploy/cloudflare)). It registers appropriate handlers for `fetch`, `install` and `activate`.

For more information you can see the [source code](https://github.com/nuxt/nitro/blob/main/src/runtime/entries/service-worker.ts).

## Custom build preset (advanced)

 - Allows full customization
 - This is an advanced usage pattern

### Setup

You can create your own custom build preset. See [the provided presets](https://github.com/nuxt/framework/blob/main/packages/nitro/src/presets) for examples.

#### Inline preset definition

You can define everything that a custom preset would configure directly in the Nitro options:

```ts [nuxt.config.js]
export default {
  nitro: {
    //
  }
}
```

#### Reusable preset

You can also define a preset in a separate file (or publish as a separate npm package).

```ts [my-preset/index.ts]
import type { NitroPreset } from '@nuxt/nitro'

const myPreset: NitroPreset = {
  // Your custom configuration
}

export default myPreset
```

Then in your `nuxt.config` you can specify that Nitro should use your custom preset:

```ts [nuxt.config.js]
import { resolve } from 'path'

export default {
  nitro: {
    preset: resolve(__dirname, 'my-preset')
  }
}
```
