# State

Nuxt provides `useState` to create a globally shared state within the context.

`useState` is an SSR-friendly `ref` in that its value will be hydrated (preserved) after server-side rendering and is shared across all components using a unique key.


Within your pages, components and plugins you can use `useState`.

```js
const state = useState<T>(key: string, init?: () => T): Ref<T>
```

* **key**: A unique key ensuring that data fetching can be properly de-duplicated across requests
* **init**: A function that provides initial value for the state when it's not initiated
* **T**: (typescript only) Specify type of state

::alert{icon=ðŸ‘‰}
**`useState` only works during `setup` or `Lifecycle Hooks`**
::

## Shared State

Whenever using `useState('x')` we always get the same reference within the context.

But this way we have to take care about using correct keys and type. Instead we can create shared state composables and auto import them using [auto imported composables](/docs/directory-structure/composables):

```ts [composables/states.ts]
export const useColor = () => useState('color', () => 'pink')
```

```vue [app.vue]
<script setup>
const color = useColor() // Same as useState('color')
</script>

<template>
  Current color: {{ color }}
</template>
```

## Example

In this example, we use a server-only plugin to find about request locale.

```ts [composables/states.ts]
export const useLocale = () => useState<string>('locale', () => 'en')
```

```ts [plugins/locale.server.ts]
export default defineNuxtPlugin((nuxtApp) => {
  const locale = useLocale()
  locale.value = nuxtApp.ssrContext?.req.headers['accept-language']?.split(',')[0]
})
```

```vue [app.vue]
<script setup>
const locale = useLocale() // Same as useState('locale')
</script>

<template>
  Current locale: {{ locale }}
</template>
```
